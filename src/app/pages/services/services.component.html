<div class="page-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
      <img src="./assets/logo.png" alt="Logo">
    </div>
    
    <nav class="menu-section">
      <h3>ACCUEIL</h3>
      <a routerLink="/accueil" class="menu-item">
        <i class="fas fa-home"></i>
        Accueil
      </a>
      <a routerLink="/categories" class="menu-item">
        <i class="fas fa-th-large"></i>
        Catégories
      </a>
      <a routerLink="/services" class="menu-item active">
        <i class="fas fa-tools"></i>
        Services
      </a>
      <a routerLink="/profil" class="menu-item">
        <i class="fas fa-user"></i>
        Profil
      </a>
      <a routerLink="/commentaires" class="menu-item">
        <i class="fas fa-comments"></i> Commentaires
      </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <div class="notification-bar">
      <i class="far fa-bell"></i>
    </div>

    <div class="content-wrapper">
      <!-- Services Section -->
      <section class="services-section">
        <div class="section-header">
          <h2><b>Les services disponibles</b></h2>
        </div>

        <!-- Filtres -->
        <div class="filters-section">
          <div class="filter-group">
            <label>Catégorie :</label>
            <select 
              [ngModel]="selectedCategory()" 
              (ngModelChange)="onCategoryChange($event)"
              class="filter-select"
            >
              <option [ngValue]="null">Toutes les catégories</option>
              <option *ngFor="let cat of categories()" [ngValue]="cat.id">
                {{ cat.nom }}
              </option>
            </select>
          </div>

          <div class="filter-group">
            <label>Sous-catégorie :</label>
            <select 
              [ngModel]="selectedSubCategory()" 
              (ngModelChange)="selectedSubCategory.set($event); loadServices()"
              [disabled]="!selectedCategory()"
              class="filter-select"
            >
              <option [ngValue]="null">Toutes les sous-catégories</option>
              <option *ngFor="let sub of subCategories()" [ngValue]="sub.id">
                {{ sub.nom }}
              </option>
            </select>
          </div>
        </div>

        <!-- États de chargement -->
        <div *ngIf="loading()" class="loading-state">
          <i class="fas fa-spinner fa-spin"></i>
          <p>Chargement des services...</p>
        </div>

        <!-- Message d'erreur -->
        <div *ngIf="error()" class="error-state">
          <i class="fas fa-exclamation-circle"></i>
          <p>{{ error() }}</p>
        </div>

        <!-- Liste des services -->
        <div *ngIf="!loading() && !error()" class="services-grid">
          <div 
            *ngFor="let service of services()" 
            class="service-card"
          >
            <div class="service-image-container">
              <div class="service-image-placeholder">
                {{ service?.categorie?.nom?.charAt(0) || 'S' }}
              </div>
            </div>
            <div class="service-card-body">
              <div class="service-header">
                <h2 class="service-title">
                  {{ service?.categorie?.nom || 'Catégorie non spécifiée' }}
                </h2>
                <span class="service-price">
                  {{ formatPrice(service?.prix || 0) }}
                </span>
              </div>
              <p class="service-description">
                {{ service?.description || 'Aucune description disponible' }}
              </p>
              <div class="service-prestataire">
                <i class="fas fa-user-tie"></i>
                {{ service?.prestataire?.client?.email || 'Email non disponible' }}
              </div>
              <div class="service-card-footer">
                <a 
                  *ngIf="service?.id" 
                  [routerLink]="['/services', service.id]" 
                  class="details-button"
                >
                  Voir détails
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- Aucun service disponible -->
        <div 
          *ngIf="!loading() && !error() && services().length === 0" 
          class="no-services"
        >
          <i class="fas fa-tools"></i>
          <p>Aucun service disponible pour les critères sélectionnés</p>
        </div>
      </section>
    </div>
  </main>
</div>